!function(e,n){"function"==typeof define&&define.amd?define(["raphael"],function(t){return e.JustGage=n(t)}):"object"==typeof module&&module.exports?module.exports=e.JustGage=n(require("raphael")):e.JustGage=n(Raphael)}("undefined"!=typeof window?window:this,function(V){function t(t){const C=this;if(C.events={},N(t))return console.log("* justgage: Make sure to pass options to the constructor!"),!1;if(N(t.id)){if(N(t.parentNode))return console.log("* justgage: Make sure to pass the existing element id or parentNode to the constructor."),!1;C.node=t.parentNode}else if(C.node=document.getElementById(t.id),!C.node)return console.log("* justgage: No element with id : %s found",t.id),!1;var e=C.node.dataset||{},n=!N(t.defaults)&&t.defaults;!1!==n&&delete(t=function(e){e=e||{};for(let t=1;t<arguments.length;t++)if(arguments[t])for(const n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}({},t,n)).defaults,C.config={id:t.id,classId:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;const n="x"===t?e:3&e|8;return n.toString(16)}),value:T("value",t,e,0,"float"),defaults:T("defaults",t,e,0,!1),parentNode:T("parentNode",t,e,null),width:T("width",t,e,null),height:T("height",t,e,null),valueFontColor:T("valueFontColor",t,e,"#010101"),valueFontFamily:T("valueFontFamily",t,e,"Arial"),symbol:T("symbol",t,e,""),min:T("min",t,e,0,"float"),minTxt:T("minTxt",t,e,!1),max:T("max",t,e,100,"float"),maxTxt:T("maxTxt",t,e,!1),reverse:T("reverse",t,e,!1),humanFriendlyDecimal:T("humanFriendlyDecimal",t,e,0),textRenderer:T("textRenderer",t,e,null),onAnimationEnd:T("onAnimationEnd",t,e,null),gaugeWidthScale:T("gaugeWidthScale",t,e,1),gaugeColor:T("gaugeColor",t,e,"#edebeb"),label:T("label",t,e,""),labelFontColor:T("labelFontColor",t,e,"#b3b3b3"),labelFontFamily:T("labelFontFamily",t,e,"Arial"),shadowOpacity:T("shadowOpacity",t,e,.2),shadowSize:T("shadowSize",t,e,5),shadowVerticalOffset:T("shadowVerticalOffset",t,e,3),levelColors:T("levelColors",t,e,["#a9d70b","#f9c802","#ff0000"],"array"),startAnimationTime:T("startAnimationTime",t,e,700),startAnimationType:T("startAnimationType",t,e,">"),refreshAnimationTime:T("refreshAnimationTime",t,e,700),refreshAnimationType:T("refreshAnimationType",t,e,">"),donutStartAngle:T("donutStartAngle",t,e,90),valueMinFontSize:T("valueMinFontSize",t,e,16),labelMinFontSize:T("labelMinFontSize",t,e,10),minLabelMinFontSize:T("minLabelMinFontSize",t,e,10),maxLabelMinFontSize:T("maxLabelMinFontSize",t,e,10),hideValue:T("hideValue",t,e,!1),hideMinMax:T("hideMinMax",t,e,!1),showInnerShadow:T("showInnerShadow",t,e,!1),humanFriendly:T("humanFriendly",t,e,!1),noGradient:T("noGradient",t,e,!1),donut:T("donut",t,e,!1),relativeGaugeSize:T("relativeGaugeSize",t,e,!1),counter:T("counter",t,e,!1),decimals:T("decimals",t,e,0),customSectors:T("customSectors",t,e,{}),formatNumber:T("formatNumber",t,e,!1),pointer:T("pointer",t,e,!1),pointerOptions:T("pointerOptions",t,e,{}),displayRemaining:T("displayRemaining",t,e,!1)};let i,o,a,l,r,c,f,s,m,g,u,d,p,x,h,b,v,y,M;C.config.value>C.config.max&&(C.config.value=C.config.max),C.config.value<C.config.min&&(C.config.value=C.config.min),C.originalValue=T("value",t,e,-1,"float"),null!==C.config.id&&null!==document.getElementById(C.config.id)?C.canvas=V(C.config.id,"100%","100%"):null!==C.config.parentNode&&(C.canvas=V(C.config.parentNode,"100%","100%")),o=!0===C.config.relativeGaugeSize?!0===C.config.donut?(C.canvas.setViewBox(0,0,200,200,!0),i=200):(C.canvas.setViewBox(0,0,200,100,!0),i=200,100):null!==C.config.width&&null!==C.config.height?(i=C.config.width,C.config.height):null!==C.config.parentNode?(C.canvas.setViewBox(0,0,200,100,!0),i=200,100):(i=+Y(document.getElementById(C.config.id),"width").slice(0,-2),+Y(document.getElementById(C.config.id),"height").slice(0,-2)),M=(y=(v=!0===C.config.donut?(i>o?(l=o,a=l):l=(i,o,a=i,a),c=(i-a)/2,f=(o-l)/2,s=16<l/6.4?l/5.4:18,m=c+a/2,g=""!==C.config.label?f+l/1.85:f+l/1.7,u=10<l/16?l/16:10,d=c+a/2,p=g+u,x=10<l/16?l/16:10,h=c+a/10+a/6.666666666666667*C.config.gaugeWidthScale/2,b=p,10<l/16?l/16:10):(i>o?(l=o,a=2*l,a>i&&(r=a/i,a/=r,l/=r)):l=i<o?(a=i,a/2):(a=i,.5*a),c=(i-a)/2,f=(o-l)/2,s=l/6.5>C.config.valueMinFontSize?l/6.5:C.config.valueMinFontSize,m=c+a/2,g=f+l/1.275,u=l/16>C.config.labelMinFontSize?l/16:C.config.labelMinFontSize,d=c+a/2,p=g+s/2+5,x=l/16>C.config.minLabelMinFontSize?l/16:C.config.minLabelMinFontSize,h=c+a/10+a/6.666666666666667*C.config.gaugeWidthScale/2,b=p,l/16>C.config.maxLabelMinFontSize?l/16:C.config.maxLabelMinFontSize),c+a-a/10-a/6.666666666666667*C.config.gaugeWidthScale/2),p),C.params={canvasW:i,canvasH:o,widgetW:a,widgetH:l,dx:c,dy:f,valueFontSize:s,valueX:m,valueY:g,labelFontSize:u,labelX:d,labelY:p,minFontSize:x,minX:h,minY:b,maxFontSize:v,maxX:y,maxY:M},C.canvas.customAttributes.pki=function(t){let e=C.config.min,n=C.config.max;var i=C.params.widgetW,o=C.params.widgetH,a=C.params.dx,l=C.params.dy,r=C.config.gaugeWidthScale,c=C.config.donut;let f,s,m,g,u,d,p,x,h,b;return e<0&&(n-=e,t-=e,e=0),c?(f=(1-2*(t-e)/(n-e))*Math.PI,s=i/2-i/30,m=s-i/6.666666666666667*r,g=i/2+a,u=o/2+l,d=g+s*Math.cos(f),p=u-s*Math.sin(f),x=g+m*Math.cos(f),h=u-m*Math.sin(f),b="M"+(g-m)+","+u+" ",b+="L"+(g-s)+","+u+" ",t-e>(n-e)/2&&(b+="A"+s+","+s+" 0 0 1 "+(g+s)+","+u+" "),b+="A"+s+","+s+" 0 0 1 "+d+","+p+" ",b+="L"+x+","+h+" ",t-e>(n-e)/2&&(b+="A"+m+","+m+" 0 0 0 "+(g+m)+","+u+" ")):(f=(1-(t-e)/(n-e))*Math.PI,s=i/2-i/10,m=s-i/6.666666666666667*r,g=i/2+a,u=o/1.25+l,d=g+s*Math.cos(f),p=u-s*Math.sin(f),x=g+m*Math.cos(f),h=u-m*Math.sin(f),b="M"+(g-m)+","+u+" ",b+="L"+(g-s)+","+u+" ",b+="A"+s+","+s+" 0 0 1 "+d+","+p+" ",b+="L"+x+","+h+" "),b+="A"+m+","+m+" 0 0 0 "+(g-m)+","+u+" ",b+="Z ",{path:b}},C.canvas.customAttributes.ndl=function(t){var e=C.config.min,n=C.config.max,i=C.params.widgetW,o=C.params.widgetH,a=C.params.dx,l=C.params.dy,r=C.config.gaugeWidthScale,c=C.config.donut;let f=3.5*i/100,s=i/15,m=i/100;null!=C.config.pointerOptions.toplength&&void 0!==C.config.pointerOptions.toplength&&(f=C.config.pointerOptions.toplength),null!=C.config.pointerOptions.bottomlength&&void 0!==C.config.pointerOptions.bottomlength&&(s=C.config.pointerOptions.bottomlength),null!=C.config.pointerOptions.bottomwidth&&void 0!==C.config.pointerOptions.bottomwidth&&(m=C.config.pointerOptions.bottomwidth);let g,u,d,p,x,h,b,v,y,M,F,S,w,A,z,V,T;return T=(V=(z=(A=(w=(S=(F=(M=(y=(v=(b=(h=(x=(p=c?(g=(1-2*(t-e)/(n-e))*Math.PI,u=i/2-i/30,d=u-i/6.666666666666667*r,o/2+l):(g=(1-(t-e)/(n-e))*Math.PI,u=i/2-i/10,d=u-i/6.666666666666667*r,o/1.25+l),i/2+a+u*Math.cos(g)),o-(o-p)-u*Math.sin(g)),i/2+a+d*Math.cos(g)),o-(o-p)-d*Math.sin(g)),x+f*Math.cos(g)),h-f*Math.sin(g)),b-s*Math.cos(g)),v+s*Math.sin(g)),F+m*Math.sin(g)),S+m*Math.cos(g)),F-m*Math.sin(g)),S-m*Math.cos(g)),"M"+w+","+A+" "),T+="L"+z+","+V+" ",T+="L"+y+","+M+" ",T+="Z ",{path:T}},C.gauge=C.canvas.path().attr({stroke:"none",fill:C.config.gaugeColor,pki:[C.config.max]}),C.level=C.canvas.path().attr({stroke:"none",fill:O(C.config.value,(C.config.value-C.config.min)/(C.config.max-C.config.min),C.config.levelColors,C.config.noGradient,C.config.customSectors),pki:[C.config.min]}),C.config.donut&&C.level.transform("r"+C.config.donutStartAngle+", "+(C.params.widgetW/2+C.params.dx)+", "+(C.params.widgetH/2+C.params.dy)),C.config.pointer&&(C.needle=C.canvas.path().attr({stroke:N(C.config.pointerOptions.stroke)?"none":C.config.pointerOptions.stroke,"stroke-width":N(C.config.pointerOptions.stroke_width)?0:C.config.pointerOptions.stroke_width,"stroke-linecap":N(C.config.pointerOptions.stroke_linecap)?"square":C.config.pointerOptions.stroke_linecap,fill:N(C.config.pointerOptions.color)?"#000000":C.config.pointerOptions.color,ndl:[C.config.min]}),C.config.donut&&C.needle.transform("r"+C.config.donutStartAngle+", "+(C.params.widgetW/2+C.params.dx)+", "+(C.params.widgetH/2+C.params.dy))),C.txtValue=C.canvas.text(C.params.valueX,C.params.valueY,0),C.txtValue.attr({"font-size":C.params.valueFontSize,"font-weight":"bold","font-family":C.config.valueFontFamily,fill:C.config.valueFontColor,"fill-opacity":"0"}),k(C.txtValue,C.params.valueFontSize,C.params.valueY),C.txtLabel=C.canvas.text(C.params.labelX,C.params.labelY,C.config.label),C.txtLabel.attr({"font-size":C.params.labelFontSize,"font-weight":"normal","font-family":C.config.labelFontFamily,fill:C.config.labelFontColor,"fill-opacity":"0"}),k(C.txtLabel,C.params.labelFontSize,C.params.labelY);let F=C.config.min;C.config.reverse&&(F=C.config.max),C.txtMinimum=F,C.config.minTxt?C.txtMinimum=C.config.minTxt:C.config.humanFriendly?C.txtMinimum=E(F,C.config.humanFriendlyDecimal):C.config.formatNumber&&(C.txtMinimum=L(F)),C.txtMin=C.canvas.text(C.params.minX,C.params.minY,C.txtMinimum),C.txtMin.attr({"font-size":C.params.minFontSize,"font-weight":"normal","font-family":C.config.labelFontFamily,fill:C.config.labelFontColor,"fill-opacity":C.config.hideMinMax||C.config.donut?"0":"1"}),k(C.txtMin,C.params.minFontSize,C.params.minY);let S=C.config.max;C.config.reverse&&(S=C.config.min),C.txtMaximum=S,C.config.maxTxt?C.txtMaximum=C.config.maxTxt:C.config.humanFriendly?C.txtMaximum=E(S,C.config.humanFriendlyDecimal):C.config.formatNumber&&(C.txtMaximum=L(S)),C.txtMax=C.canvas.text(C.params.maxX,C.params.maxY,C.txtMaximum),C.txtMax.attr({"font-size":C.params.maxFontSize,"font-weight":"normal","font-family":C.config.labelFontFamily,fill:C.config.labelFontColor,"fill-opacity":C.config.hideMinMax||C.config.donut?"0":"1"}),k(C.txtMax,C.params.maxFontSize,C.params.maxY);const w=C.canvas.canvas.childNodes[1],A="http://www.w3.org/2000/svg";void 0!==I&&I<9||(void 0!==I?function t(e){void 0!==document.createElementNS?e():setTimeout(function(){t(e)},100)}(function(){C.generateShadow(A,w)}):C.generateShadow(A,w)),C.config.textRenderer&&!1!==C.config.textRenderer(C.originalValue)?C.originalValue=C.config.textRenderer(C.originalValue):C.config.humanFriendly?C.originalValue=E(C.originalValue,C.config.humanFriendlyDecimal)+C.config.symbol:C.config.formatNumber?C.originalValue=L(C.originalValue)+C.config.symbol:C.config.displayRemaining?C.originalValue=(C.config.max-C.originalValue).toFixed(C.config.decimals)+C.config.symbol:C.originalValue=(+C.originalValue).toFixed(C.config.decimals)+C.config.symbol,!0===C.config.counter?(this.bindEvent("raphael.anim.finish",function(){C.txtValue.attr({text:C.originalValue}),k(C.txtValue,C.params.valueFontSize,C.params.valueY)}),this.bindEvent("raphael.anim.frame",function(){let t=C.level.attr("pki")[0];C.config.reverse&&(t=+C.config.max+ +C.config.min-+C.level.attr("pki")[0]),C.config.textRenderer&&!1!==C.config.textRenderer(Math.floor(t))?C.txtValue.attr("text",C.config.textRenderer(Math.floor(t))):C.config.humanFriendly?C.txtValue.attr("text",E(Math.floor(t),C.config.humanFriendlyDecimal)+C.config.symbol):C.config.formatNumber?C.txtValue.attr("text",L(Math.floor(t))+C.config.symbol):C.config.displayRemaining?C.txtValue.attr("text",(C.config.max-t).toFixed(C.config.decimals)+C.config.symbol):C.txtValue.attr("text",(+t).toFixed(C.config.decimals)+C.config.symbol),k(C.txtValue,C.params.valueFontSize,C.params.valueY),t=null})):this.bindEvent("raphael.anim.start",function(){C.txtValue.attr({text:C.originalValue}),k(C.txtValue,C.params.valueFontSize,C.params.valueY)});let z=C.config.value;C.config.reverse&&(z=+C.config.max+ +C.config.min-+C.config.value),C.level.animate({pki:[z]},C.config.startAnimationTime,C.config.startAnimationType,C.config.onAnimationEnd),C.config.pointer&&C.needle.animate({ndl:[z]},C.config.startAnimationTime,C.config.startAnimationType),C.txtValue.animate({"fill-opacity":C.config.hideValue?"0":"1"},C.config.startAnimationTime,C.config.startAnimationType),C.txtLabel.animate({"fill-opacity":"1"},C.config.startAnimationTime,C.config.startAnimationType)}function i(t,e,n){switch(e){case"valueFontColor":if(!o(n)){console.log("* justgage: the updated valueFontColor value is not a valid hex color");break}t.txtValue.attr({fill:n});break;case"labelFontColor":if(!o(n)){console.log("* justgage: the updated labelFontColor value is not a valid hex color");break}t.txtMin.attr({fill:n}),t.txtMax.attr({fill:n}),t.txtLabel.attr({fill:n});break;default:console.log(`* justgage: "${e}" is not a supported update setting`)}}function T(t,e,n,i,o){let a=i,l=!1;if(!N(t)&&(!N(n)&&"object"==typeof n&&t in n?(a=n[t],l=!0):!N(e)&&"object"==typeof e&&t in e?(a=e[t],l=!0):a=i,!0===l&&!N(o)))switch(o){case"int":a=parseInt(a,10);break;case"float":a=parseFloat(a)}return a}function N(t){return null==t}function O(e,n,i,o,a){let l,r,c,f,s,m,g,u,d,p,x;var t=a&&a.ranges&&0<a.ranges.length;if(o=o||t,t){!0===a.percents&&(e=100*n);for(let t=0;t<a.ranges.length;t++)if(e>=a.ranges[t].lo&&e<=a.ranges[t].hi)return a.ranges[t].color}t=i.length;if(1===t)return i[0];var h=o?1/t:1/(t-1);const b=[];for(let t=0;t<i.length;t++)l=o?h*(t+1):h*t,r=parseInt(v(i[t]).substring(0,2),16),c=parseInt(v(i[t]).substring(2,4),16),f=parseInt(v(i[t]).substring(4,6),16),b[t]={pct:l,color:{r:r,g:c,b:f}};if(0===n)return"rgb("+[b[0].color.r,b[0].color.g,b[0].color.b].join(",")+")";for(let t=0;t<b.length;t++)if(n<=b[t].pct)return o?"rgb("+[b[t].color.r,b[t].color.g,b[t].color.b].join(",")+")":(s=b[t-1],g=(m=b[t]).pct-s.pct,d=1-(u=(n-s.pct)/g),p=u,x={r:Math.floor(s.color.r*d+m.color.r*p),g:Math.floor(s.color.g*d+m.color.g*p),b:Math.floor(s.color.b*d+m.color.b*p)},"rgb("+[x.r,x.g,x.b].join(",")+")")}function k(t){(!I||9<I)&&t.node.firstChild.attributes.dy&&(t.node.firstChild.attributes.dy.value=0)}function v(t){return"#"===t.charAt(0)?t.substring(1,7):t}function o(t){return"string"==typeof t&&/^#([0-9A-Fa-f]{3}){1,2}$/.test(t)}function E(t,e){var e=Math.pow(10,e),n=" KMGTPE";let i=0;for(;(1e3<=t||t<=-1e3)&&++i<n.length;)t/=1e3;return i=i>=n.length?n.length-1:i,Math.round(t*e)/e+n[i]}function L(t){const e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function Y(t,e){let n="";return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,"").getPropertyValue(e):t.currentStyle&&(e=e.replace(/-(\w)/g,function(t,e){return e.toUpperCase()}),n=t.currentStyle[e]),n}t.prototype.bindEvent=function(t,e){t+="."+this.level.id,this.events[t]&&V.eve.off(t,this.events[t]),V.eve.on(t,e),this.events[t]=e},t.prototype.refresh=function(t,e,n,i){var o=this;let a;e=r(e)?e:null,n=r(n)?n:null,null!==(i=i||null)&&(o.config.label=i,o.txtLabel.attr({text:o.config.label}),k(o.txtLabel,o.params.labelFontSize,o.params.labelY)),null!==n&&(o.config.min=n,o.txtMinimum=o.config.min,o.config.minTxt?o.txtMinimum=o.config.minTxt:o.config.humanFriendly?o.txtMinimum=E(o.config.min,o.config.humanFriendlyDecimal):o.config.formatNumber&&(o.txtMinimum=L(o.config.min)),o.config.reverse?(o.txtMax.attr({text:o.txtMinimum}),k(o.txtMax,o.params.minFontSize,o.params.minY)):(o.txtMin.attr({text:o.txtMinimum}),k(o.txtMin,o.params.minFontSize,o.params.minY))),null!==e&&(o.config.max=e,o.txtMaximum=o.config.max,o.config.maxTxt?o.txtMaximum=o.config.maxTxt:o.config.humanFriendly?o.txtMaximum=E(o.config.max,o.config.humanFriendlyDecimal):o.config.formatNumber&&(o.txtMaximum=L(o.config.max)),o.config.reverse?(o.txtMin.attr({text:o.txtMaximum}),k(o.txtMin,o.params.maxFontSize,o.params.maxY)):(o.txtMax.attr({text:o.txtMaximum}),k(o.txtMax,o.params.maxFontSize,o.params.maxY)));e=O(t=+(t=+(a=t)>+o.config.max?+o.config.max:t)<+o.config.min?+o.config.min:t,(t-o.config.min)/(o.config.max-o.config.min),o.config.levelColors,o.config.noGradient,o.config.customSectors);a=o.config.textRenderer&&!1!==o.config.textRenderer(a)?o.config.textRenderer(a):o.config.humanFriendly?E(a,o.config.humanFriendlyDecimal)+o.config.symbol:o.config.formatNumber?L((+a).toFixed(o.config.decimals))+o.config.symbol:o.config.displayRemaining?(o.config.max-a).toFixed(o.config.decimals)+o.config.symbol:(+a).toFixed(o.config.decimals)+o.config.symbol,o.originalValue=a,o.config.value=+t,o.config.counter||(o.txtValue.attr({text:a}),k(o.txtValue,o.params.valueFontSize,o.params.valueY));let l=o.config.value;o.config.reverse&&(l=+o.config.max+ +o.config.min-+o.config.value),o.level.animate({pki:[l],fill:e},o.config.refreshAnimationTime,o.config.refreshAnimationType,o.config.onAnimationEnd),o.config.pointer&&o.needle.animate({ndl:[l]},o.config.refreshAnimationTime,o.config.refreshAnimationType)},t.prototype.update=function(t,e){if(t instanceof Object)for(const n in t)e=t[n],i(this,n,e);else i(this,t,e)},t.prototype.destroy=function(){this.node&&this.node.parentNode&&(this.node.innerHTML="");for(const t in this.events)V.eve.off(t,this.events[t]);this.events={}},t.prototype.generateShadow=function(t,e){var n=this,i="inner-shadow-"+(n.config.id||n.config.classId);const o=document.createElementNS(t,"filter");o.setAttribute("id",i),e.appendChild(o);const a=document.createElementNS(t,"feOffset");a.setAttribute("dx",0),a.setAttribute("dy",n.config.shadowVerticalOffset),o.appendChild(a);const l=document.createElementNS(t,"feGaussianBlur");l.setAttribute("result","offset-blur"),l.setAttribute("stdDeviation",n.config.shadowSize),o.appendChild(l);const r=document.createElementNS(t,"feComposite");r.setAttribute("operator","out"),r.setAttribute("in","SourceGraphic"),r.setAttribute("in2","offset-blur"),r.setAttribute("result","inverse"),o.appendChild(r);const c=document.createElementNS(t,"feFlood");c.setAttribute("flood-color","black"),c.setAttribute("flood-opacity",n.config.shadowOpacity),c.setAttribute("result","color"),o.appendChild(c);const f=document.createElementNS(t,"feComposite");f.setAttribute("operator","in"),f.setAttribute("in","color"),f.setAttribute("in2","inverse"),f.setAttribute("result","shadow"),o.appendChild(f);const s=document.createElementNS(t,"feComposite");s.setAttribute("operator","over"),s.setAttribute("in","shadow"),s.setAttribute("in2","SourceGraphic"),o.appendChild(s),n.config.showInnerShadow&&(n.canvas.canvas.childNodes[2].setAttribute("filter","url(#"+i+")"),n.canvas.canvas.childNodes[3].setAttribute("filter","url(#"+i+")"))};const I=function(){let t=3;const e=document.createElement("div");for(var n=e.getElementsByTagName("i");n[0];)e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e";return 4<t?t:void 0}();function r(t){return null!=t&&!isNaN(t)}return t});